<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MASKIT - ì •ì±… ê´€ë¦¬</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../style.css">
  <style>
    .policy-container {
      padding: 24px;
    }
    .policy-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }
    .policy-header h2 {
      margin: 0;
      font-size: 24px;
      font-weight: 600;
    }
    .policy-actions {
      display: flex;
      gap: 12px;
    }
    .policy-table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: var(--shadow);
    }
    .policy-table th {
      background: #f8f9fa;
      padding: 16px;
      text-align: left;
      font-weight: 600;
      color: var(--text);
      border-bottom: 2px solid var(--line);
    }
    .policy-table td {
      padding: 16px;
      border-bottom: 1px solid var(--line);
    }
    .policy-table tr:hover {
      background: #f8f9fa;
    }
    .status-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 13px;
      font-weight: 500;
    }
    .status-active {
      background: #dcfce7;
      color: #15803d;
    }
    .status-inactive {
      background: #fee2e2;
      color: #991b1b;
    }
    .btn-primary {
      background: var(--accent);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
    }
    .btn-primary:hover {
      opacity: 0.9;
    }
    .btn-secondary {
      background: white;
      color: var(--text);
      border: 1px solid var(--line);
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
    }
    .btn-secondary:hover {
      background: #f8f9fa;
    }
    .action-btn {
      padding: 6px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 13px;
      margin-right: 6px;
    }
    .btn-edit {
      background: #eff6ff;
      color: #1e40af;
    }
    .btn-delete {
      background: #fee2e2;
      color: #991b1b;
    }
  </style>
</head>
<body>
  <div class="app">
    <aside class="custombar" id="custombar">
      <div class="sb-head">
        <div class="sb-title">ì •ì±… í•„í„°</div>
      </div>

      <div class="group">
        <button class="group-toggle" aria-expanded="false">
          <span>ì •ì±… ìœ í˜•</span>
          <svg class="caret" viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" fill="none" stroke-width="2"><polyline points="8 4 16 12 8 20" /></svg>
        </button>
        <ul class="items">
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">DLP ì •ì±…</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ë§ˆìŠ¤í‚¹ ì •ì±…</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ìŠ¹ì¸ ì •ì±…</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ë³´ì•ˆ ì •ì±…</span>
          </li>
        </ul>
      </div>

      <div class="group">
        <button class="group-toggle" aria-expanded="false">
          <span>ì ìš© ë²”ìœ„</span>
          <svg class="caret" viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" fill="none" stroke-width="2"><polyline points="8 4 16 12 8 20" /></svg>
        </button>
        <ul class="items">
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ì „ì²´ ì¡°ì§</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ë¶€ì„œë³„</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ì‚¬ìš©ìë³„</span>
          </li>
        </ul>
      </div>

      <div class="panel-footer">
        <button class="btn edit">í•„í„° ì ìš©</button>
      </div>
    </aside>

    <header class="top-bar">
      <div class="top-bar-title">ğŸ›¡ï¸ MASKIT - ì •ì±… ê´€ë¦¬</div>
      <div class="top-bar-buttons">
        <span id="userInfo" style="color: white; font-size: 0.9em;"></span>
        <button class="top-bar-button" id="logoutBtn" style="background: rgba(255,255,255,0.2); margin-left: 1em;">
          <span>ë¡œê·¸ì•„ì›ƒ</span>
        </button>
      </div>
    </header>

    <section class="panel">
      <div class="policy-container">
        <div class="policy-header">
          <h2>ì •ì±… ê´€ë¦¬</h2>
          <div class="policy-actions">
            <button class="btn-secondary">ì •ì±… ê°€ì ¸ì˜¤ê¸°</button>
            <button class="btn-primary" id="createPolicyBtn">ìƒˆ ì •ì±… ìƒì„±</button>
          </div>
        </div>

        <table class="policy-table">
          <thead>
            <tr>
              <th>ì •ì±… ì´ë¦„</th>
              <th>ìœ í˜•</th>
              <th>ì ìš© ë²”ìœ„</th>
              <th>ìƒíƒœ</th>
              <th>ìƒì„±ì¼</th>
              <th>ë§ˆì§€ë§‰ ìˆ˜ì •</th>
              <th>ì‘ì—…</th>
            </tr>
          </thead>
          <tbody id="policyTableBody">
            <tr>
              <td>ê°œì¸ì •ë³´ ë³´í˜¸ ì •ì±…</td>
              <td>DLP ì •ì±…</td>
              <td>ì „ì²´ ì¡°ì§</td>
              <td><span class="status-badge status-active">í™œì„±</span></td>
              <td>2024-01-15</td>
              <td>2024-03-20</td>
              <td>
                <button class="action-btn btn-edit">í¸ì§‘</button>
                <button class="action-btn btn-delete">ì‚­ì œ</button>
              </td>
            </tr>
            <tr>
              <td>ê¸ˆìœµ ì •ë³´ ë§ˆìŠ¤í‚¹</td>
              <td>ë§ˆìŠ¤í‚¹ ì •ì±…</td>
              <td>ì¬ë¬´íŒ€</td>
              <td><span class="status-badge status-active">í™œì„±</span></td>
              <td>2024-02-01</td>
              <td>2024-03-18</td>
              <td>
                <button class="action-btn btn-edit">í¸ì§‘</button>
                <button class="action-btn btn-delete">ì‚­ì œ</button>
              </td>
            </tr>
            <tr>
              <td>ì™¸ë¶€ ì „ì†¡ ìŠ¹ì¸</td>
              <td>ìŠ¹ì¸ ì •ì±…</td>
              <td>ì „ì²´ ì¡°ì§</td>
              <td><span class="status-badge status-active">í™œì„±</span></td>
              <td>2024-01-20</td>
              <td>2024-03-15</td>
              <td>
                <button class="action-btn btn-edit">í¸ì§‘</button>
                <button class="action-btn btn-delete">ì‚­ì œ</button>
              </td>
            </tr>
            <tr>
              <td>í…ŒìŠ¤íŠ¸ ì •ì±…</td>
              <td>DLP ì •ì±…</td>
              <td>R&DíŒ€</td>
              <td><span class="status-badge status-inactive">ë¹„í™œì„±</span></td>
              <td>2024-03-01</td>
              <td>2024-03-10</td>
              <td>
                <button class="action-btn btn-edit">í¸ì§‘</button>
                <button class="action-btn btn-delete">ì‚­ì œ</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <aside class="sidebar" id="sidebar">
      <div class="sb-head">
        <div class="sb-title">ì •ì±… ìƒì„¸ ì •ë³´</div>
      </div>
      <div style="padding: 20px; color: var(--muted);">
        <p>ì •ì±…ì„ ì„ íƒí•˜ë©´ ìƒì„¸ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>
      </div>
    </aside>
  </div>

  <script src="../script.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const token = localStorage.getItem('auth_token');
      const user = JSON.parse(localStorage.getItem('user') || 'null');

      if (!token || !user) {
        window.location.href = '../smtp/login.html';
        return;
      }

      document.getElementById('userInfo').textContent = `${user.nickname} (${user.email})`;

      document.getElementById('logoutBtn').addEventListener('click', function() {
        localStorage.removeItem('auth_token');
        localStorage.removeItem('user');
        window.location.href = '../smtp/login.html';
      });

      document.getElementById('createPolicyBtn').addEventListener('click', function() {
        alert('ì •ì±… ìƒì„± ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.');
      });
    });
  </script>
</body>
</html>
