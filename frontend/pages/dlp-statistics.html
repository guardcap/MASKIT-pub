<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MASKIT - DLP í†µê³„</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../style.css">
  <style>
    .stats-container {
      padding: 24px;
    }
    .stats-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }
    .stats-header h2 {
      margin: 0;
      font-size: 24px;
      font-weight: 600;
    }
    .date-range {
      display: flex;
      gap: 12px;
      align-items: center;
    }
    .date-input {
      padding: 8px 12px;
      border: 1px solid var(--line);
      border-radius: 8px;
      font-size: 14px;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 24px;
    }
    .stat-card {
      background: white;
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 24px;
      box-shadow: var(--shadow);
    }
    .stat-title {
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 8px;
    }
    .stat-value {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 8px;
    }
    .stat-change {
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .stat-change.positive {
      color: var(--ok);
    }
    .stat-change.negative {
      color: #dc2626;
    }
    .chart-container {
      background: white;
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 24px;
      box-shadow: var(--shadow);
      margin-bottom: 24px;
    }
    .chart-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
    }
    .chart-placeholder {
      width: 100%;
      height: 300px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 16px;
      font-weight: 500;
    }
    .table-container {
      background: white;
      border: 1px solid var(--line);
      border-radius: 12px;
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    .stats-table {
      width: 100%;
      border-collapse: collapse;
    }
    .stats-table th {
      background: #f8f9fa;
      padding: 16px;
      text-align: left;
      font-weight: 600;
      color: var(--text);
      border-bottom: 2px solid var(--line);
    }
    .stats-table td {
      padding: 16px;
      border-bottom: 1px solid var(--line);
    }
    .stats-table tr:hover {
      background: #f8f9fa;
    }
    .severity-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
    }
    .severity-high {
      background: #fee2e2;
      color: #991b1b;
    }
    .severity-medium {
      background: #fef3c7;
      color: #92400e;
    }
    .severity-low {
      background: #dbeafe;
      color: #1e40af;
    }
    .btn-secondary {
      background: white;
      color: var(--text);
      border: 1px solid var(--line);
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      font-size: 14px;
    }
    .btn-secondary:hover {
      background: #f8f9fa;
    }
  </style>
</head>
<body>
  <div class="app">
    <aside class="custombar" id="custombar">
      <div class="sb-head">
        <div class="sb-title">í•„í„°</div>
      </div>

      <div class="group">
        <button class="group-toggle" aria-expanded="false">
          <span>ê¸°ê°„ ì„ íƒ</span>
          <svg class="caret" viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" fill="none" stroke-width="2"><polyline points="8 4 16 12 8 20" /></svg>
        </button>
        <ul class="items">
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ì˜¤ëŠ˜</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ìµœê·¼ 7ì¼</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ìµœê·¼ 30ì¼</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ì´ë²ˆ ë‹¬</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ì‚¬ìš©ì ì§€ì •</span>
          </li>
        </ul>
      </div>

      <div class="group">
        <button class="group-toggle" aria-expanded="false">
          <span>ì‹¬ê°ë„</span>
          <svg class="caret" viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" fill="none" stroke-width="2"><polyline points="8 4 16 12 8 20" /></svg>
        </button>
        <ul class="items">
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ë†’ìŒ</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ì¤‘ê°„</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ë‚®ìŒ</span>
          </li>
        </ul>
      </div>

      <div class="group">
        <button class="group-toggle" aria-expanded="false">
          <span>ë¶€ì„œ</span>
          <svg class="caret" viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" fill="none" stroke-width="2"><polyline points="8 4 16 12 8 20" /></svg>
        </button>
        <ul class="items">
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ì „ì²´</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ì¸ì‚¬íŒ€</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ì¬ë¬´íŒ€</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">R&DíŒ€</span>
          </li>
        </ul>
      </div>

      <div class="panel-footer">
        <button class="btn edit">í•„í„° ì ìš©</button>
      </div>
    </aside>

    <header class="top-bar">
      <div class="top-bar-title">ğŸ›¡ï¸ MASKIT - DLP í†µê³„</div>
      <div class="top-bar-buttons">
        <span id="userInfo" style="color: white; font-size: 0.9em;"></span>
        <button class="top-bar-button" id="logoutBtn" style="background: rgba(255,255,255,0.2); margin-left: 1em;">
          <span>ë¡œê·¸ì•„ì›ƒ</span>
        </button>
      </div>
    </header>

    <section class="panel">
      <div class="stats-container">
        <div class="stats-header">
          <h2>DLP í†µê³„ ëŒ€ì‹œë³´ë“œ</h2>
          <div class="date-range">
            <input type="date" class="date-input" id="startDate">
            <span>~</span>
            <input type="date" class="date-input" id="endDate">
            <button class="btn-secondary">ì¡°íšŒ</button>
          </div>
        </div>

        <div class="stats-grid">
          <div class="stat-card" style="border-left: 4px solid #2563eb;">
            <div class="stat-title">ì´ íƒì§€ ê±´ìˆ˜</div>
            <div class="stat-value" style="color: #2563eb;">12,456</div>
            <div class="stat-change positive">
              <span>â†‘ 12.5%</span>
              <span>ì§€ë‚œ ë‹¬ ëŒ€ë¹„</span>
            </div>
          </div>

          <div class="stat-card" style="border-left: 4px solid #dc2626;">
            <div class="stat-title">ì°¨ë‹¨ëœ ì „ì†¡</div>
            <div class="stat-value" style="color: #dc2626;">342</div>
            <div class="stat-change negative">
              <span>â†‘ 8.3%</span>
              <span>ì§€ë‚œ ë‹¬ ëŒ€ë¹„</span>
            </div>
          </div>

          <div class="stat-card" style="border-left: 4px solid #f59e0b;">
            <div class="stat-title">ë§ˆìŠ¤í‚¹ ì²˜ë¦¬</div>
            <div class="stat-value" style="color: #f59e0b;">8,234</div>
            <div class="stat-change positive">
              <span>â†‘ 15.2%</span>
              <span>ì§€ë‚œ ë‹¬ ëŒ€ë¹„</span>
            </div>
          </div>

          <div class="stat-card" style="border-left: 4px solid #16a34a;">
            <div class="stat-title">ìŠ¹ì¸ ì™„ë£Œ</div>
            <div class="stat-value" style="color: #16a34a;">3,880</div>
            <div class="stat-change positive">
              <span>â†‘ 5.7%</span>
              <span>ì§€ë‚œ ë‹¬ ëŒ€ë¹„</span>
            </div>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart-title">ì¼ë³„ íƒì§€ ì¶”ì´</div>
          <div class="chart-placeholder">
            ì°¨íŠ¸ ì˜ì—­ (Chart.js ë˜ëŠ” D3.js ì—°ë™ ì˜ˆì •)
          </div>
        </div>

        <div class="chart-container">
          <div class="chart-title">ë¯¼ê° ì •ë³´ ìœ í˜•ë³„ ë¶„í¬</div>
          <div class="chart-placeholder">
            ì›í˜• ì°¨íŠ¸ ì˜ì—­ (Chart.js ë˜ëŠ” D3.js ì—°ë™ ì˜ˆì •)
          </div>
        </div>

        <div class="table-container">
          <table class="stats-table">
            <thead>
              <tr>
                <th>ë‚ ì§œ</th>
                <th>ë¶€ì„œ</th>
                <th>íƒì§€ ìœ í˜•</th>
                <th>ì‹¬ê°ë„</th>
                <th>ê±´ìˆ˜</th>
                <th>ì²˜ë¦¬ ìƒíƒœ</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2024-03-20</td>
                <td>ì¸ì‚¬íŒ€</td>
                <td>ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸</td>
                <td><span class="severity-badge severity-high">ë†’ìŒ</span></td>
                <td>156</td>
                <td>ë§ˆìŠ¤í‚¹ ì™„ë£Œ</td>
              </tr>
              <tr>
                <td>2024-03-20</td>
                <td>ì¬ë¬´íŒ€</td>
                <td>ì‹ ìš©ì¹´ë“œ ë²ˆí˜¸</td>
                <td><span class="severity-badge severity-high">ë†’ìŒ</span></td>
                <td>89</td>
                <td>ë§ˆìŠ¤í‚¹ ì™„ë£Œ</td>
              </tr>
              <tr>
                <td>2024-03-19</td>
                <td>R&DíŒ€</td>
                <td>ì´ë©”ì¼ ì£¼ì†Œ</td>
                <td><span class="severity-badge severity-medium">ì¤‘ê°„</span></td>
                <td>234</td>
                <td>ìŠ¹ì¸ ì™„ë£Œ</td>
              </tr>
              <tr>
                <td>2024-03-19</td>
                <td>ëŒ€ì™¸í˜‘ë ¥íŒ€</td>
                <td>ì „í™”ë²ˆí˜¸</td>
                <td><span class="severity-badge severity-low">ë‚®ìŒ</span></td>
                <td>67</td>
                <td>ìŠ¹ì¸ ì™„ë£Œ</td>
              </tr>
              <tr>
                <td>2024-03-18</td>
                <td>ì¸ì‚¬íŒ€</td>
                <td>ê³„ì¢Œë²ˆí˜¸</td>
                <td><span class="severity-badge severity-high">ë†’ìŒ</span></td>
                <td>45</td>
                <td>ì°¨ë‹¨</td>
              </tr>
              <tr>
                <td>2024-03-18</td>
                <td>ì¬ë¬´íŒ€</td>
                <td>ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸</td>
                <td><span class="severity-badge severity-medium">ì¤‘ê°„</span></td>
                <td>123</td>
                <td>ë§ˆìŠ¤í‚¹ ì™„ë£Œ</td>
              </tr>
              <tr>
                <td>2024-03-17</td>
                <td>CSíŒ€</td>
                <td>ì´ë©”ì¼ ì£¼ì†Œ</td>
                <td><span class="severity-badge severity-low">ë‚®ìŒ</span></td>
                <td>345</td>
                <td>ìŠ¹ì¸ ì™„ë£Œ</td>
              </tr>
              <tr>
                <td>2024-03-17</td>
                <td>R&DíŒ€</td>
                <td>ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸</td>
                <td><span class="severity-badge severity-high">ë†’ìŒ</span></td>
                <td>12</td>
                <td>ì°¨ë‹¨</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <aside class="sidebar" id="sidebar">
      <div class="sb-head">
        <div class="sb-title">ì£¼ìš” ì§€í‘œ</div>
      </div>
      <div style="padding: 20px;">
        <div style="margin-bottom: 24px;">
          <h3 style="font-size: 16px; margin-bottom: 12px; font-weight: 600;">ì‹¤ì‹œê°„ í˜„í™©</h3>
          <div style="display: flex; flex-direction: column; gap: 12px;">
            <div style="padding: 12px; background: #eff6ff; border-radius: 8px;">
              <div style="font-size: 13px; color: var(--muted); margin-bottom: 4px;">ì˜¤ëŠ˜ íƒì§€</div>
              <div style="font-size: 24px; font-weight: 600; color: #1e40af;">456ê±´</div>
            </div>
            <div style="padding: 12px; background: #fee2e2; border-radius: 8px;">
              <div style="font-size: 13px; color: var(--muted); margin-bottom: 4px;">ëŒ€ê¸° ì¤‘</div>
              <div style="font-size: 24px; font-weight: 600; color: #991b1b;">12ê±´</div>
            </div>
            <div style="padding: 12px; background: #dcfce7; border-radius: 8px;">
              <div style="font-size: 13px; color: var(--muted); margin-bottom: 4px;">í‰ê·  ì²˜ë¦¬ ì‹œê°„</div>
              <div style="font-size: 24px; font-weight: 600; color: #15803d;">2.3ë¶„</div>
            </div>
          </div>
        </div>

        <div style="margin-bottom: 24px;">
          <h3 style="font-size: 16px; margin-bottom: 12px; font-weight: 600;">ìƒìœ„ íƒì§€ ìœ í˜•</h3>
          <div style="display: flex; flex-direction: column; gap: 10px; font-size: 14px;">
            <div style="display: flex; justify-content: space-between; padding: 8px; background: #f8f9fa; border-radius: 6px;">
              <span>ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸</span>
              <span style="font-weight: 600; color: var(--accent);">28%</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 8px; background: #f8f9fa; border-radius: 6px;">
              <span>ì´ë©”ì¼ ì£¼ì†Œ</span>
              <span style="font-weight: 600; color: var(--accent);">22%</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 8px; background: #f8f9fa; border-radius: 6px;">
              <span>ì‹ ìš©ì¹´ë“œ ë²ˆí˜¸</span>
              <span style="font-weight: 600; color: var(--accent);">18%</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 8px; background: #f8f9fa; border-radius: 6px;">
              <span>ì „í™”ë²ˆí˜¸</span>
              <span style="font-weight: 600; color: var(--accent);">15%</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 8px; background: #f8f9fa; border-radius: 6px;">
              <span>ê¸°íƒ€</span>
              <span style="font-weight: 600; color: var(--accent);">17%</span>
            </div>
          </div>
        </div>

        <div>
          <h3 style="font-size: 16px; margin-bottom: 12px; font-weight: 600;">ë¶€ì„œë³„ í˜„í™©</h3>
          <div style="display: flex; flex-direction: column; gap: 10px; font-size: 14px;">
            <div style="display: flex; justify-content: space-between;">
              <span>ì¸ì‚¬íŒ€</span>
              <span style="font-weight: 600;">1,234ê±´</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span>ì¬ë¬´íŒ€</span>
              <span style="font-weight: 600;">987ê±´</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span>R&DíŒ€</span>
              <span style="font-weight: 600;">756ê±´</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span>CSíŒ€</span>
              <span style="font-weight: 600;">654ê±´</span>
            </div>
          </div>
        </div>
      </div>
    </aside>
  </div>

  <script src="../script.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const token = localStorage.getItem('auth_token');
      const user = JSON.parse(localStorage.getItem('user') || 'null');

      if (!token || !user) {
        window.location.href = '../smtp/login.html';
        return;
      }

      document.getElementById('userInfo').textContent = `${user.nickname} (${user.email})`;

      document.getElementById('logoutBtn').addEventListener('click', function() {
        localStorage.removeItem('auth_token');
        localStorage.removeItem('user');
        window.location.href = '../smtp/login.html';
      });

      // ë‚ ì§œ ê¸°ë³¸ê°’ ì„¤ì •
      const today = new Date();
      const lastWeek = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);

      document.getElementById('endDate').valueAsDate = today;
      document.getElementById('startDate').valueAsDate = lastWeek;
    });
  </script>
</body>
</html>
