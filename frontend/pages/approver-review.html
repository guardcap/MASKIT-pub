<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MASKIT - ìŠ¹ì¸ì ê²€í† </title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../style.css">
</head>
<body>
  <div class="app">
    <aside class="custombar" id="custombar">
      <div class="sb-head">
        <div class="sb-title">ì»¤ìŠ¤í…€</div>
      </div>

      
      <div class="group" id="group-inside">
        <button class="group-toggle" aria-expanded="false">
          <span>ì‚¬ë‚´</span>
          <svg class="caret" viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" fill="none" stroke-width="2"><polyline points="8 4 16 12 8 20" /></svg>
        </button>
        <ul class="items">
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ì¸ì‚¬íŒ€(HR)</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ê³ ê°ì§€ì›íŒ€(CS)</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">R&DíŒ€</span>
          </li>
          <li class="item">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ëŒ€ì™¸í˜‘ë ¥íŒ€</span>
            </li>
        </ul>
      </div>

      <div class="group" id="group-outside">
        <button class="group-toggle" aria-expanded="false">
          <span>ì‚¬ì™¸</span>
          <svg class="caret" viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" fill="none" stroke-width="2"><polyline points="8 4 16 12 8 20" /></svg>
        </button>
        <ul class="items">
          <li class="item"><button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">í˜‘ë ¥ ì—…ì²´</span>
          </li>
          <li class="item"><button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ê³ ê°ì‚¬</span>
          </li>

          <li class="item has-sub" data-sub="gov-purpose">
            <button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
              <span class="txt">ì •ë¶€ ê¸°ê´€</span>
          </li>

          <ul class="subdrop" id="gov-purpose" hidden>
            <li class="subitem">
              <button class="checkbox off" aria-checked="false" data-check></button>
              <span class="txt">ì„¸ë¬´ ì‹ ê³  / ì¬ë¬´ ë³´ê³ </span>
            </li>
            <li class="subitem">
              <button class="checkbox off" aria-checked="false" data-check></button>
              <span class="txt">ë…¸ë™Â·ê³ ìš© ê´€ë ¨ ë³´ê³ </span>
            </li>
            <li class="subitem">
              <button class="checkbox off" aria-checked="false" data-check></button>
              <span class="txt">ê°œì¸ì •ë³´Â·ë³´ì•ˆ ê·œì œ ëŒ€ì‘</span>
            </li>
            <li class="subitem">
              <button class="checkbox off" aria-checked="false" data-check></button>
              <span class="txt">ì •ë¶€ ì§€ì›ì‚¬ì—… / ê³¼ì œ ë³´ê³ </span>
        </li>
      </ul>
    </li>
  </ul>
      </div>

      <div class="group">
        <button class="group-toggle" aria-expanded="false">
          <span>ì„¸ë¶€ ì»¤ìŠ¤í…€ </span>
          <svg class="caret" viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" fill="none" stroke-width="2"><polyline points="8 4 16 12 8 20" /></svg>
        </button>
        <ul class="items">
          <li class="item"><button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">ì‚¬ë‚´ ê·œì¹™ ìš°ì„ </span>
          </li>
          <li class="item"><button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">êµ­ë‚´ ë²•ë¥  ìš°ì„ </span>
          </li>
          <li class="item"><button class="checkbox off" aria-checked="false" title="ì„ íƒ" data-check></button>
            <span class="txt">GDPR ìš°ì„ </span>
          </li>
        </ul>
      </div>

      <div class="panel-footer">
        <button class="btn edit">ì™„ë£Œ</button>
        <button class="btn" id="maskingBtn">ë§ˆìŠ¤í‚¹ ì™„ë£Œ</button>
      </div>
  </aside>

        <header class="top-bar">
    <div class="top-bar-title">ğŸ›¡ï¸ MASKIT - ìŠ¹ì¸ì ê²€í† </div>
    <div class="top-bar-buttons">
        <button class="top-bar-button" id="approveBtn">
            <span>ìŠ¹ì¸</span>
        </button>
        <button class="top-bar-button" id="rejectBtn">
            <span>ë°˜ë ¤</span>
        </button>
        <span id="userInfo" style="color: white; margin-left: 2em; font-size: 0.9em;"></span>
        <button class="top-bar-button" id="logoutBtn" style="background: rgba(255,255,255,0.2); margin-left: 1em;">
            <span>ë¡œê·¸ì•„ì›ƒ</span>
        </button>
    </div>
</header>

    <section class="panel">
      <div class="top">
        <div class="recipients" id="recipients">
          <button class="more-btn" id="recipToggle" type="button">ì—´ê¸°</button>
        </div>
        <div class="me">
          <div class="avatar" aria-hidden="true"></div>
          <div class="who">
            <span class="team">ëŒ€ì™¸í˜‘ë ¥íŒ€ íŒ€ì¥</span>
            <span class="nick">6kitty</span>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="grid2">
          <div class="card">
            <h4>AI ê°œìš”</h4>
            <p>ë³´ë‚´ëŠ” ì£¼ì†Œê°€ ì—¬ëŸ¬ ê°œ, ê°ê¸° ë‹¤ë¥¸ ë„ë©”ì¸ì„ ê°€ì§€ê³  ìˆì–´ ì‚¬ì™¸ ì „ì†¡ìœ¼ë¡œ ì¸ì‹í•˜ì˜€ìœ¼ë©° í•´ë‹¹ ê·œì •ì— ë§ì¶° ë§ˆìŠ¤í‚¹í–ˆìŠµë‹ˆë‹¤. ê°œì¸ì •ë³´ ìœ ì¶œ ë°©ì§€ ëª©ì ì˜ ê°œë³„ ì „ì†¡ ì„¤ì •ë„ ì ìš©ë©ë‹ˆë‹¤.</p>
          </div>
          <div class="card">
            <h4>í†µê³„</h4>
            <div class="legend">
              <div class="row"><span class="bar c1"></span><span class="t">ì‹ë³„: 7ê°œ</span></div>
              <div class="row"><span class="bar c2"></span><span class="t">ë§ˆìŠ¤í‚¹: 2ê°œ</span></div>
              <div class="row"><span class="bar c3"></span><span class="t">ê²€í†  í•„ìš”: 1ê°œ</span></div>
              <div class="row"><span class="bar c4"></span><span class="t">ê¶Œí•œ: DLP / ë°ì´í„° ì‚¬ì¼ë¡œ</span></div>
            </div>
          </div>
        </div>
      </div>

      <div class="filebar" id="filebar">
        </div>

      <div class="content">
      </div>
    </section>

    <aside class="sidebar" id="sidebar">
      <div class="sb-head">
        <div class="sb-title">Masking List</div>
      </div>
      </aside>
  </div>

    <div id="modal" class="modal hidden">
    <div class="modal-content">
      <p>ìˆ˜ì‹ ìë¥¼ ì„ íƒí•˜ì„¸ìš”.</p>
      <button id="modalClose">í™•ì¸</button>
    </div>
  </div>


  <script src="../script.js"></script>
  <script>
    // í˜ì´ì§€ ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', function() {
      // ë¡œê·¸ì¸ í™•ì¸
      const token = localStorage.getItem('auth_token');
      const user = JSON.parse(localStorage.getItem('user') || 'null');

      if (!token || !user) {
        window.location.href = '../smtp/login.html';
        return;
      }

      // ìŠ¹ì¸ì ì—­í•  í™•ì¸
      if (user.role !== 'approver') {
        alert('ìŠ¹ì¸ìë§Œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤');
        window.location.href = '../index.html';
        return;
      }

      // ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
      document.getElementById('userInfo').textContent = `${user.nickname} (${user.email})`;

      // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼
      document.getElementById('logoutBtn').addEventListener('click', function() {
        localStorage.removeItem('auth_token');
        localStorage.removeItem('user');
        window.location.href = '../smtp/login.html';
      });
    });
  </script>
</body>
</html>